<!doctype html><html lang="ru"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Nevatrip — Билеты</title><link rel="icon" href="favicon.ico"><script defer="defer" src="tickets.0ff712cfa97719547936.js"></script><link href="style.css" rel="stylesheet"></head><body><div class="wrapper"><header class="header"><div class="header__container container"><nav class="header__menu menu"><ul class="menu__list"><li class="menu__item"><a href="./" class="menu__link">Главная</a></li><li class="menu__item"><a class="menu__link menu__link--active">Билеты</a></li><li class="menu__item"><a href="./route.html" class="menu__link">Маршрут</a></li><li class="menu__item"><a href="./block.html" class="menu__link">Блок</a></li><li class="menu__item"><a href="./table.html" class="menu__link">Таблица</a></li></ul></nav></div></header><main class="main"><section class="tickets"><div class="tickets__container container"><h1 class="tickets__title title">Билеты</h1><section class="tickets__block table-block"><h2 class="table-block__title">1 Задача</h2><p class="table-block__text">Так как в будущем могут появиться другие типы билетов, то я решил пересмотреть структуру базы данных. Я разделил её на несколько связанных таблиц. В итоге типы билетов хранятся в отдельной таблице и не перегружают таблицу заказов. Состав каждого заказа вынес также в отдельную таблицу. В ней хранятся типы билетов и их количество в каждом заказе. Ниже представлена схема таблицы и сами таблицы.</p><img class="table-block__image" src="assets/img/table-types.png" alt="Таблица с типами билетов"><div class="table-block__wrapper"><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Заказы</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">oder_id</th><th class="table__cell table__cell--head">event_id</th><th class="table__cell table__cell--head">barcode</th><th class="table__cell table__cell--head">user_id</th><th class="table__cell table__cell--head">equal_price</th><th class="table__cell table__cell--head">created</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">101</td><td class="table__cell">201</td><td class="table__cell">11111111</td><td class="table__cell">451</td><td class="table__cell">700</td><td class="table__cell">2021-01-11 13:22:09</td></tr><tr class="table__row"><td class="table__cell">102</td><td class="table__cell">202</td><td class="table__cell">22222222</td><td class="table__cell">364</td><td class="table__cell">1200</td><td class="table__cell">2021-01-12 16:52:08</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">201</td><td class="table__cell">33333333</td><td class="table__cell">15</td><td class="table__cell">3500</td><td class="table__cell">2021-01-13 10:08:45</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">События</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">event_id</th><th class="table__cell table__cell--head">event_name</th><th class="table__cell table__cell--head">event_description</th><th class="table__cell table__cell--head">event_date</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">Первое событие</td><td class="table__cell">Это первое очень интересное событие!</td><td class="table__cell">2021-08-21 13:00:00</td></tr><tr class="table__row"><td class="table__cell">202</td><td class="table__cell">Второе событие</td><td class="table__cell">Это второе очень интересное событие!</td><td class="table__cell">2021-08-29 18:00:00</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Билеты</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">ticket_id</th><th class="table__cell table__cell--head">ticket_name</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">301</td><td class="table__cell">adult</td></tr><tr class="table__row"><td class="table__cell">302</td><td class="table__cell">kid</td></tr><tr class="table__row"><td class="table__cell">303</td><td class="table__cell">pref</td></tr><tr class="table__row"><td class="table__cell">304</td><td class="table__cell">group</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Прайс</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">event_id</th><th class="table__cell table__cell--head">ticket_id</th><th class="table__cell table__cell--head">price</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">301</td><td class="table__cell">700</td></tr><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">302</td><td class="table__cell">450</td></tr><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">303</td><td class="table__cell">500</td></tr><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">304</td><td class="table__cell">500</td></tr><tr class="table__row"><td class="table__cell">202</td><td class="table__cell">301</td><td class="table__cell">800</td></tr><tr class="table__row"><td class="table__cell">202</td><td class="table__cell">302</td><td class="table__cell">400</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Детали заказов</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">order_id</th><th class="table__cell table__cell--head">ticket_id</th><th class="table__cell table__cell--head">quantity</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">101</td><td class="table__cell">301</td><td class="table__cell">1</td></tr><tr class="table__row"><td class="table__cell">102</td><td class="table__cell">301</td><td class="table__cell">1</td></tr><tr class="table__row"><td class="table__cell">102</td><td class="table__cell">302</td><td class="table__cell">1</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">304</td><td class="table__cell">7</td></tr></tbody></table></div></div></section><section class="tickets__block table-lock"><h2 class="table-block__title">2 Задача</h2><p class="table-block__text">Так как нам нужы штрихкоды для каждого билета, то я убрал штрихкоды из таблицы заказов и перенес их в таблицу с деталями заказов. В деталях заказа я убрал колонку с количеством билетов, так как теперь для каждого отдельного билета присваивается свой штрихкод и билеты не группируются.</p><img class="table-block__image" src="assets/img/table-barcodes.png" alt="Таблица с штрихкодами"><div class="table-block__wrapper"><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Заказы</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">oder_id</th><th class="table__cell table__cell--head">event_id</th><th class="table__cell table__cell--head">user_id</th><th class="table__cell table__cell--head">equal_price</th><th class="table__cell table__cell--head">created</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">101</td><td class="table__cell">201</td><td class="table__cell">451</td><td class="table__cell">700</td><td class="table__cell">2021-01-11 13:22:09</td></tr><tr class="table__row"><td class="table__cell">102</td><td class="table__cell">202</td><td class="table__cell">364</td><td class="table__cell">1200</td><td class="table__cell">2021-01-12 16:52:08</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">201</td><td class="table__cell">15</td><td class="table__cell">4750</td><td class="table__cell">2021-01-13 10:08:45</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">События</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">event_id</th><th class="table__cell table__cell--head">event_name</th><th class="table__cell table__cell--head">event_description</th><th class="table__cell table__cell--head">event_date</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">Первое событие</td><td class="table__cell">Это первое очень интересное событие!</td><td class="table__cell">2021-08-21 13:00:00</td></tr><tr class="table__row"><td class="table__cell">202</td><td class="table__cell">Второе событие</td><td class="table__cell">Это второе очень интересное событие!</td><td class="table__cell">2021-08-29 18:00:00</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Билеты</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">ticket_id</th><th class="table__cell table__cell--head">ticket_name</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">301</td><td class="table__cell">adult</td></tr><tr class="table__row"><td class="table__cell">302</td><td class="table__cell">kid</td></tr><tr class="table__row"><td class="table__cell">303</td><td class="table__cell">pref</td></tr><tr class="table__row"><td class="table__cell">304</td><td class="table__cell">group</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Прайс</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">event_id</th><th class="table__cell table__cell--head">ticket_id</th><th class="table__cell table__cell--head">price</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">301</td><td class="table__cell">700</td></tr><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">302</td><td class="table__cell">450</td></tr><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">303</td><td class="table__cell">500</td></tr><tr class="table__row"><td class="table__cell">201</td><td class="table__cell">304</td><td class="table__cell">500</td></tr><tr class="table__row"><td class="table__cell">202</td><td class="table__cell">301</td><td class="table__cell">800</td></tr><tr class="table__row"><td class="table__cell">202</td><td class="table__cell">302</td><td class="table__cell">400</td></tr></tbody></table></div><div class="table-block__overflow"><table class="table-block__table table"><caption class="table__caption">Детали заказов</caption><thead class="table__head"><tr class="table__row"><th class="table__cell table__cell--head">order_id</th><th class="table__cell table__cell--head">ticket_id</th><th class="table__cell table__cell--head">barcode</th></tr></thead><tbody class="table__body"><tr class="table__row"><td class="table__cell">101</td><td class="table__cell">301</td><td class="table__cell">10000001</td></tr><tr class="table__row"><td class="table__cell">102</td><td class="table__cell">301</td><td class="table__cell">10000002</td></tr><tr class="table__row"><td class="table__cell">102</td><td class="table__cell">302</td><td class="table__cell">10000003</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">301</td><td class="table__cell">10000004</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">301</td><td class="table__cell">10000005</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">302</td><td class="table__cell">10000006</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">302</td><td class="table__cell">10000007</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">302</td><td class="table__cell">10000008</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">303</td><td class="table__cell">10000009</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">303</td><td class="table__cell">10000010</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">303</td><td class="table__cell">10000011</td></tr><tr class="table__row"><td class="table__cell">103</td><td class="table__cell">303</td><td class="table__cell">10000012</td></tr></tbody></table></div></div></section></div></section></main></div></body></html>